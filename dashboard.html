<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACCESS | DASHBOARD</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-block">
                <div class="logo">ACCESS</div>
                <div class="user-block">
                    <div class="greeting">HY</div>
                    <div class="username" id="username">USER</div>
                </div>
            </div>
            
            <div class="header-block right">
                <div class="status">ONLINE</div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> LOGOUT
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Stats Row -->
            <div class="stats-row">
                <div class="stat-block">
                    <div class="stat-title">TOTAL LOGINS</div>
                    <div class="stat-value" id="login-count">1</div>
                </div>
                
                <div class="stat-block">
                    <div class="stat-title">SESSION TIME</div>
                    <div class="stat-value" id="session-time">00:00</div>
                </div>
                
                <div class="stat-block">
                    <div class="stat-title">SECURITY STATUS</div>
                    <div class="stat-value">ACTIVE</div>
                </div>
            </div>

            <!-- Info Blocks -->
            <div class="content-grid">
                <!-- Profile Block -->
                <div class="info-block">
                    <div class="block-title">
                        <i class="fas fa-user"></i> PROFILE
                    </div>
                    <div class="block-content">
                        <div class="info-line">
                            <span class="info-label">NAME:</span>
                            <span class="info-value" id="profile-name">-</span>
                        </div>
                        <div class="info-line">
                            <span class="info-label">EMAIL:</span>
                            <span class="info-value" id="profile-email">-</span>
                        </div>
                        <div class="info-line">
                            <span class="info-label">MEMBER SINCE:</span>
                            <span class="info-value" id="member-since">-</span>
                        </div>
                    </div>
                </div>

                <!-- System Block -->
                <div class="info-block">
                    <div class="block-title">
                        <i class="fas fa-server"></i> SYSTEM
                    </div>
                    <div class="block-content">
                        <div class="info-line">
                            <span class="info-label">API STATUS:</span>
                            <span class="info-value status-online">ONLINE</span>
                        </div>
                        <div class="info-line">
                            <span class="info-label">DATABASE:</span>
                            <span class="info-value">SQLITE</span>
                        </div>
                        <div class="info-line">
                            <span class="info-label">ENVIRONMENT:</span>
                            <span class="info-value">PRODUCTION</span>
                        </div>
                    </div>
                </div>

                <!-- Actions Block -->
                <div class="info-block">
                    <div class="block-title">
                        <i class="fas fa-bolt"></i> ACTIONS
                    </div>
                    <div class="block-content">
                        <button class="action-btn" onclick="window.location.href='/view-data'">
                            <i class="fas fa-database"></i> VIEW DATA
                        </button>
                        <button class="action-btn" onclick="window.location.href='/api/test'">
                            <i class="fas fa-code"></i> TEST API
                        </button>
                        <button class="action-btn" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> REFRESH
                        </button>
                    </div>
                </div>

                <!-- Security Block -->
                <div class="info-block">
                    <div class="block-title">
                        <i class="fas fa-shield-alt"></i> SECURITY
                    </div>
                    <div class="block-content">
                        <div class="security-line">
                            <i class="fas fa-check"></i> PASSWORD: SECURE
                        </div>
                        <div class="security-line">
                            <i class="fas fa-check"></i> SESSION: ACTIVE
                        </div>
                        <div class="security-line">
                            <i class="fas fa-check"></i> ENCRYPTION: ON
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-left">
                <span>ACCESS CONTROL PANEL</span>
            </div>
            <div class="footer-right">
                <span id="current-time">--:--:--</span>
            </div>
        </footer>
    </div>

    <!-- Simple Script -->
    <script>
        // Load user data
        function loadUserData() {
            const user = localStorage.getItem('user');
            if (user) {
                try {
                    const userData = JSON.parse(user);
                    document.getElementById('username').textContent = userData.name.toUpperCase();
                    document.getElementById('profile-name').textContent = userData.name.toUpperCase();
                    document.getElementById('profile-email').textContent = userData.email;
                    
                    const now = new Date();
                    document.getElementById('member-since').textContent = 
                        now.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }).toUpperCase();
                } catch (e) {
                    console.log('Error loading user data');
                }
            } else {
                window.location.href = '/';
            }
        }

        // Session timer
        let sessionStart = Date.now();
        function updateSessionTimer() {
            const elapsed = Date.now() - sessionStart;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            document.getElementById('session-time').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Update time
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleTimeString('en-US', { hour12: false });
        }

        // Logout
        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = '/';
        }

        // Refresh dashboard
        function refreshDashboard() {
            const loginCount = document.getElementById('login-count');
            let count = parseInt(loginCount.textContent);
            loginCount.textContent = count + 1;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            setInterval(updateSessionTimer, 1000);
            setInterval(updateTime, 1000);
            updateTime();
        });
    </script>
</body>
</html>